<div class="posts-page-grid-container">

  <div class="top-stories-container test-border">
    <h2 style="padding-left:3.5% padding-top: 2%" id="stories-title">Top stories</h2>
    <ul class="stories-list">

    </ul>
  </div>

  <div class="post-list test-border">

    <div class="card">
      <form class="post-form" id="new-post-form" action="/posts" method="post">
        <input
          id="message-input"
          class="message-input"
          name="message"
          type="text"
          placeholder="Hi {{session.user.firstName}}, what's on your mind?"
        />
        <input type="submit" value="Post" />
      </form>
    </div>

    {{#each session.posts}}

      <div class="post-container card" id="{{this._id}}">

        <div class="profile-picture">
          <img
            src={{this.user.profilePicture}}
            width="100"
            height="100"
            class="rounded-circle"
          />
        </div>
        <div class="post-header">
          <span class="name">{{this.user.firstName}}
            {{this.user.lastName}}</span>
          <div class="date-posted">{{this.createdAt}}</div>
        </div>

        <div class="user-info">
          <div class="post-header">
            <span class="name">{{this.user.firstName}}
              {{this.user.lastName}}</span>
            <span class="date-posted">15 mins ago</span>
          </div>

          <div class="post-body">
            <p class="message">
              {{this.message}}
            </p>
          </div>
        </div>
      </div>
    {{/each}}

  </div>

  <div class="righ-hand-column test-border">

  </div>

</div>

<script>

  document.

  let fetchBtn = document.getElementById("fetchBtn");
  fetchBtn.addEventListener("click", buttonclickhandler);

  function buttonclickhandler() {
    const xhr = new XMLHttpRequest();

    xhr.open("GET", "https://content.guardianapis.com/search?q=recycling&api-key=565a3b14-672a-41b6-83e5-634caa6e8967", true);

    xhr.onload = function () {
      if (this.status === 200) {
        obj = JSON.parse(this.responseText);

        let list = document.getElementById("stories-list");
        let str = "";

        for (key in obj.data) {
          str += <li>${key.body.webTitle}</li>;
        }
        list.innerHTML = str;
      } else {
        console.log("Something went wrong");
        document.getElementById("stories-title").text = "Content unavailable";
      }

      xhr.send()
    }
  }

</script>